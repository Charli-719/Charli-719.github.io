<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"charli-719.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="不积跬步，无以至千里">
<meta property="og:type" content="website">
<meta property="og:title" content="Charli">
<meta property="og:url" content="https://charli-719.github.io/index.html">
<meta property="og:site_name" content="Charli">
<meta property="og:description" content="不积跬步，无以至千里">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Charli">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://charli-719.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Charli</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="Charli" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">Charli</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">梦想的起源</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Charli</p>
  <div class="site-description" itemprop="description">不积跬步，无以至千里</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">40</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/git%20config%E4%B8%ADname%E5%92%8Cemail%E9%97%AE%E9%A2%98">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/git%20config%E4%B8%ADname%E5%92%8Cemail%E9%97%AE%E9%A2%98" class="post-title-link" itemprop="url">git config中name和email问题</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-02-17 14:13:47 / 修改时间：14:13:58" itemprop="dateCreated datePublished" datetime="2023-02-17T14:13:47+08:00">2023-02-17</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>1233123</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/(%E4%B8%80)%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/(%E4%B8%80)%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C" class="post-title-link" itemprop="url">(一)两数之和</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-15 21:58:22" itemprop="dateCreated datePublished" datetime="2021-11-15T21:58:22+08:00">2021-11-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2023-02-17 14:11:31" itemprop="dateModified" datetime="2023-02-17T14:11:31+08:00">2023-02-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="两数之和"><a href="#两数之和" class="headerlink" title="两数之和"></a>两数之和</h1><p>给定一个整数数组 nums和一个整数目标值 target，请你在该数组中找出 <strong>和为目标值</strong>  <em>target</em> 的那 <strong>两个</strong> 整数，并返回它们的数组下标。</p>
<p>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。</p>
<p>你可以按任意顺序返回答案。</p>
<p>示例 1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [2,7,11,15], target = 9</span><br><span class="line">输出：[0,1]</span><br><span class="line">解释：因为 nums[0] + nums[1] == 9 ，返回 [0, 1] 。</span><br></pre></td></tr></table></figure>

<p>示例 2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [3,2,4], target = 6</span><br><span class="line">输出：[1,2]</span><br></pre></td></tr></table></figure>

<p>示例 3：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：nums = [3,3], target = 6</span><br><span class="line">输出：[0,1]</span><br></pre></td></tr></table></figure>
<p> <br>提示：</p>
<ul>
<li>2 &lt;&#x3D; nums.length &lt;&#x3D; 104</li>
<li>-109 &lt;&#x3D; nums[i] &lt;&#x3D; 109</li>
<li>-109 &lt;&#x3D; target &lt;&#x3D; 109</li>
<li><strong>只会存在一个有效答案</strong></li>
</ul>
<p><strong>进阶：</strong>你可以想出一个时间复杂度小于 O(n2) 的算法吗？</p>
<hr>
<p>解题1：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var twoSum = function(nums, target)&#123;</span><br><span class="line">    for(let i=0;i&lt;nums.length;i++)&#123;</span><br><span class="line">        let num2 = target - nums[i];</span><br><span class="line">        if(nums.includes(num2) &amp;&amp; nums.indexOf(num2) != i)&#123;</span><br><span class="line">            return [i, nums.indexOf(num2)]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解题2：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const twoSum = (nums, target) =&gt; &#123;</span><br><span class="line">  const prevNums = &#123;&#125;;                         // 存放出现过的数字，和对应的索引</span><br><span class="line">  for (let i = 0; i &lt; nums.length; i++) &#123;      // 遍历每一项</span><br><span class="line">    const curNum = nums[i];                    // 当前项</span><br><span class="line">    const targetNum = target - curNum;         // 希望从过去的数字中找到的呼应项</span><br><span class="line">    const targetNumIndex = prevNums[targetNum];// 在prevNums中找targetNum的索引</span><br><span class="line">    if (targetNumIndex !== undefined) &#123;        // 如果能找到</span><br><span class="line">      return [targetNumIndex, i];              // 直接返回targetNumIndex和当前的i</span><br><span class="line">    &#125;                                          // 如果找不到，说明之前没出现过targetNum</span><br><span class="line">    prevNums[curNum] = i;                      // 往prevNums存当前curNum和对应的i</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/alternate%20of%20undefined">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/alternate%20of%20undefined" class="post-title-link" itemprop="url">alternate of undefined</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-16 21:37:21" itemprop="dateCreated datePublished" datetime="2021-04-16T21:37:21+08:00">2021-04-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/react/" itemprop="url" rel="index"><span itemprop="name">react</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>前一天还可以好好运行的项目,第二天打开就报错了.<br>没有什么改动,真的是感觉代码有毒~<br>既然碰到了这个坑,那就先跳再说</p>
<h1 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h1><p>项目使用的react版本为16.10.0<br>但是2021-03-22 react官方更新了17.0.2的版本，导致我的项目报了alternate of undefined，就很奇怪的问题，我就添加debugger一步一步的找问题<br><img src="/bug.png"></p>
<p>左边是react16.8.6下运行的显示的有_reactInternalFiber这个属性，但是右边的就没有这个属性，react16的大版本都是用的Fiber，没有找到这个属性，所以后续就报错了<br><img src="/01.png"><br><img src="/02.jpg"></p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>网上去找这个问题的解决方案,很多人说是版本的问题.<br>然后就更新版本，把react、react-dom和react-art 都统一更新到17.0.2的版本，这个问题就解决了。<br>看网上说最好是保证这三个使用的插件大版本是同一个</p>
<h1 id="遗留问题"><a href="#遗留问题" class="headerlink" title="遗留问题"></a>遗留问题</h1><p>（PS：为什么react更新版本导致了这个项目的问题呢，没有检查到项目中是否有用到云版本~    待解决！！！）</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/git%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/git%E5%AD%A6%E4%B9%A0%E6%8C%87%E5%8D%97" class="post-title-link" itemprop="url">git学习指南</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-12 00:10:30" itemprop="dateCreated datePublished" datetime="2021-04-12T00:10:30+08:00">2021-04-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>那天心血来潮去上图看书了,拿了一本《git学习指南》，还挺厚的一本书，我就走马观花似的看了一遍，记录一下我的摘抄。</p>
<h3 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h3><p>–format、–oneline 格式化输出<br>–stat、–shortstat 统计信息修改<br>–grph  日志选项<br>–interactive  代码段选取</p>
<p>git diff 文件名   &#x2F;&#x2F;查看被修改的行<br>git rm 文件名   &#x2F;&#x2F;删除文件<br>git log       &#x2F;&#x2F;显示历史<br>git clone –bare ***.git    &#x2F;&#x2F;创建裸版本库</p>
<p>git log -n 3  &#x2F;&#x2F;only the last three commits<br>git log –online &#x2F;&#x2F;only one line per commit<br>git log –stat &#x2F;&#x2F;only show statistics<br>git log –graph –online  &#x2F;&#x2F;各提交之间的关系<br>git staus 中的文件可以使用   git reset HEAD(重置为当前的HEAD版本)  ***文件  移出暂存区 </p>
<p>git status –short<br>git stash<br>git stash pop<br>git stash list<br>git stash pop **文件<br>git log –summary -m90% | grep -e “^rename” 百分比显示源文件和目标文件的相似度<br>git log –follow **文件 &#x2F;&#x2F;连续读取文件被重命名之后的历史记录<br>git blame -M -C -C -C **文件 &#x2F;&#x2F;确定文件来源<br>git branch &#x2F;&#x2F;查看分支<br>git checkout -b **分支   &#x2F;&#x2F;创建并切换到新分支<br>git branch -d **分支  &#x2F;&#x2F;删除分支<br>git branch **分支  **分支散列值    &#x2F;&#x2F; 恢复某个分支<br>git reflog  &#x2F;&#x2F; 列取散列值<br>git reset merge  &#x2F;&#x2F;取消合并<br>git remote –verbose   &#x2F;&#x2F;显示用于获取或推送提交的路径<br>git branch -r &#x2F;&#x2F;跟踪分支<br>git pull –rebase</p>
<p>git tag  &#x2F;&#x2F;创建标签<br>git show -ref –dereference –tags  &#x2F;&#x2F;打印标签的散列值<br>git log –oneline –decorate  &#x2F;&#x2F;将标签添加到日志输出中<br>git log -l  &#x2F;&#x2F;显示所有标签<br>git log –walk-reflogs mybranch  &#x2F;&#x2F;显示一个分支的本地历史记录<br>git diff<br>git diff –word-diff    &#x2F;&#x2F;按单词显示所做的修改<br>git diff –word-diff&#x3D;color    &#x2F;&#x2F;使用不同的颜色显示文件中的不同<br>git config –global alias.ci commit   &#x2F;&#x2F;commit的别名为ci<br>git config –global alias.st status  &#x2F;&#x2F;设置status的别名为st<br>git rebase 变基</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/%E5%9C%A8React%20Hooks%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E5%9C%A8React%20Hooks%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95" class="post-title-link" itemprop="url">在React Hooks中使用生命周期方法</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-16 18:48:03" itemprop="dateCreated datePublished" datetime="2021-03-16T18:48:03+08:00">2021-03-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文来自于<a target="_blank" rel="noopener" href="https://www.sollrei.me/post/frontend/2019-05-28">Sollrei</a></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>因为项目上用到了hooks+ts，在使用定时任务的时候，退出当前组件时，仍然会执行定时任务，但是在hooks中没有componentWillUnMount方法，所以就网上查找资料。</p>
<h3 id="React新版本的生命周期"><a href="#React新版本的生命周期" class="headerlink" title="React新版本的生命周期"></a>React新版本的生命周期</h3><p><img src="/01.jpg"></p>
<blockquote>
<p>react 16.3之后新增了两个生命周期getDerivedStateFromProps和getSnapshotBeforeUpdate，并且原来的componentWillMount，componentWillReceiveProps以及componentWillUpdate将被移除。</p>
</blockquote>
<h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><p>函数组件不用写constructor，用useState初始化state</p>
<h3 id="getDerivedStateFromProps"><a href="#getDerivedStateFromProps" class="headerlink" title="getDerivedStateFromProps"></a>getDerivedStateFromProps</h3><blockquote>
<p>这个方法基本用来替代componentWillReceiveProps，它是个静态方法，也就是说不能访问this，也就是说不能改this.state</p>
</blockquote>
<p>官方栗子</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ScrollView</span>(<span class="params">&#123;row&#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> [isScrollingDown, setIsScrollingDown] = <span class="title function_">useState</span>(<span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">let</span> [prevRow, setPrevRow] = <span class="title function_">useState</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (row !== prevRow) &#123;</span><br><span class="line">    <span class="comment">// 上次渲染后row发生变化  更新isScrollingDown.</span></span><br><span class="line">    <span class="title function_">setIsScrollingDown</span>(prevRow !== <span class="literal">null</span> &amp;&amp; row &gt; prevRow);</span><br><span class="line">    <span class="title function_">setPrevRow</span>(row);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`Scrolling down: <span class="subst">$&#123;isScrollingDown&#125;</span>`</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate"></a>shouldComponentUpdate</h3><p>使用React.memo，类似PureComponent，但它只对比props的变化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Demo</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>对子组件可以使用useMemo</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params">&#123; a, b &#125;</span>) &#123;</span><br><span class="line">  <span class="comment">// 只在a变化时re-render</span></span><br><span class="line">  <span class="keyword">const</span> child1 = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child1</span> <span class="attr">a</span>=<span class="string">&#123;a&#125;</span> /&gt;</span></span>, [a]);</span><br><span class="line">  <span class="comment">// 只在b变化时re-render</span></span><br><span class="line">  <span class="keyword">const</span> child2 = <span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Child2</span> <span class="attr">b</span>=<span class="string">&#123;b&#125;</span> /&gt;</span></span>, [b]);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;child1&#125;</span></span><br><span class="line"><span class="language-xml">      &#123;child2&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><p>那就是函数它自个儿了……<br>下面几个可以使用useEffect(fn, […watchStates])实现的</p>
<h3 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h3><p>第二个参数传空数组</p>
<blockquote>
<p>这么写在useEffect里使用一些state的时候会报错”missing dependency”，暂时用了eslint-disable-line</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> [title, setTitle] = <span class="title function_">useState</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="comment">// do ...</span></span><br><span class="line">  &#125;, []); <span class="comment">// eslint-disable-line</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">// 点击文字是 hello world world .... 但是页面title是hello</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTitle(title + &#x27; world&#x27;)&#125;&gt;&#123;title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate"></a>componentDidUpdate</h3><p>只传一个参数，每次render就都会调用这个函数，和componentDidUpdate不同的是第一次render也会执行它</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> [title, setTitle] = <span class="title function_">useState</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="comment">// do ...</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTitle(title + &#x27; world&#x27;)&#125;&gt;&#123;title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果不希望在第一次（初始）render时候调用，可以：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> [title, setTitle] = <span class="title function_">useState</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">  <span class="keyword">const</span> first = <span class="title function_">useRef</span>(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useLayoutEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (first.<span class="property">current</span>) &#123;</span><br><span class="line">      first.<span class="property">current</span> = <span class="literal">false</span>;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">title</span> = title;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentDidUpdateFunction&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTitle(title + &#x27; world&#x27;)&#125;&gt;&#123;title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="componentWillUnmount"><a href="#componentWillUnmount" class="headerlink" title="componentWillUnmount"></a>componentWillUnmount</h3><p>在useEffect的第一个函数参数中返回一个函数，这个函数就会在unmount时候被调用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Demo</span> () &#123;</span><br><span class="line">  <span class="keyword">const</span> [title, setTitle] = <span class="title function_">useState</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;componentWillUnmount&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setTitle(title + &#x27; world&#x27;)&#125;&gt;&#123;title&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后最后componentDidCatch和getDerivedStateFromError暂时还不能用Hook来实现，暂时。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7h5%E8%B7%B3%E8%BD%AC%E5%B0%8F%E7%A8%8B%E5%BA%8F">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7h5%E8%B7%B3%E8%BD%AC%E5%B0%8F%E7%A8%8B%E5%BA%8F" class="post-title-link" itemprop="url">微信公众号h5跳转小程序</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-01-18 20:21:39" itemprop="dateCreated datePublished" datetime="2021-01-18T20:21:39+08:00">2021-01-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p> 最近在公司做活动，遇到了h5活动页面唤起小程序的需求, 找了资料，发现了wx-open-launch-open。<br> <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/doc/offiaccount/OA_Web_Apps/Wechat_Open_Tag.html">微信官方文档</a> 支持了这种跳转，不过对微信版本、系统版本都有要求。</p>
<p> 因为需求需要判断当前用户是否支持，不支持则显示别的内容，支持就点击后直接跳转到小程序。开始我的探索路</p>
<h1 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h1><h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><p> 这个微信官方文档里面说的很清楚，登录<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/">微信公众平台</a>进入“公众号设置”的“功能设置”里填写“JS接口安全域名”。</p>
<h2 id="引入js文件"><a href="#引入js文件" class="headerlink" title="引入js文件"></a>引入js文件</h2><p> 在需要调用JS接口的页面引入如下JS文件：<a target="_blank" rel="noopener" href="http://res.wx.qq.com/open/js/jweixin-1.6.0.js">http://res.wx.qq.com/open/js/jweixin-1.6.0.js</a> （支持https）</p>
<p> 如需进一步提升服务稳定性，当上述资源不可访问时，可改访问：<a target="_blank" rel="noopener" href="http://res2.wx.qq.com/open/js/jweixin-1.6.0.js">http://res2.wx.qq.com/open/js/jweixin-1.6.0.js</a> （支持https）</p>
<p> 备注：支持使用 AMD&#x2F;CMD 标准模块加载方法加载<br> （ps：因为我们的h5页面是https， 所以引入的连接要是https的，不然会有问题呦）</p>
<h2 id="通过config接口注入权限验证配置并申请所需开放标签"><a href="#通过config接口注入权限验证配置并申请所需开放标签" class="headerlink" title="通过config接口注入权限验证配置并申请所需开放标签"></a>通过config接口注入权限验证配置并申请所需开放标签</h2><p> 与使用JS-SDK配置方式相同，所有需要使用开放标签的页面必须先注入配置信息，并通过openTagList字段申请所需要的开放标签，否则将无法使用（同一个url仅需调用一次）。开放标签的申请和JS接口的申请相互独立，因此是可以同时申请的。<br> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wx.config(&#123;</span><br><span class="line">  debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印</span><br><span class="line">  appId: &#x27;&#x27;, // 必填，公众号的唯一标识</span><br><span class="line">  timestamp: , // 必填，生成签名的时间戳</span><br><span class="line">  nonceStr: &#x27;&#x27;, // 必填，生成签名的随机串</span><br><span class="line">  signature: &#x27;&#x27;,// 必填，签名</span><br><span class="line">  jsApiList: [], // 必填，需要使用的JS接口列表</span><br><span class="line">  openTagList: [] // 可选，需要使用的开放标签列表，例如[&#x27;wx-open-launch-app&#x27;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h2 id="通过ready接口处理成功验证"><a href="#通过ready接口处理成功验证" class="headerlink" title="通过ready接口处理成功验证"></a>通过ready接口处理成功验证</h2> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.ready(function () &#123;</span><br><span class="line">  // config信息验证后会执行ready方法，所有接口调用都必须在config接口获得结果之后，config是一个客户端的异步操作，所以如果需要在页面加载时就调用相关接口，则须把相关接口放在ready函数中调用来确保正确执行。对于用户触发时才调用的接口，则可以直接调用，不需要放在ready函数中</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="通过error接口处理失败验证"><a href="#通过error接口处理失败验证" class="headerlink" title="通过error接口处理失败验证"></a>通过error接口处理失败验证</h2> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wx.error(function (res) &#123;</span><br><span class="line">  // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><p>所有开放标签都能像普通的HTML标签一样在页面中直接使用，不需要再进行额外的处理。</p>
<blockquote>
<p>(ps: 我们使用的是react，所有也是使用的script)</p>
</blockquote>
<p>对于标签事件，均可通过event.detail获得详细信息。如果无特殊说明，下文标签事件说明中的返回值均指代event.detail中的内容。</p>
<p>另外，需要注意以下几点：如果所使用的标签允许提供插槽，由于插槽中模版的样式是和页面隔离的，因此需要注意在插槽中定义模版的样式。插槽模版及样式均需要通过</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;&lt;/template&gt;</span><br></pre></td></tr></table></figure>
<p>进行包裹。对于Vue等视图框架，为了避免template标签冲突的问题，可使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/wxtag-template&quot;&gt;&lt;script&gt;</span><br></pre></td></tr></table></figure>
<p>进行代替，来包裹插槽模版和样式。另外，对于具名插槽还需要通过slot属性声明插槽名称，下文标签插槽中的default插槽为默认插槽，可不声明插槽名称。</p>
<p>页面中与布局和定位相关的样式，如position: fixed; top -100;等，尽量不要写在插槽模版的节点中，请声明在标签或其父节点上；<br>对于有CSP要求的页面，需要添加白名单frame-src https:&#x2F;&#x2F;*.qq.com webcompt:，才能在页面中正常使用开放标签。</p>
<h1 id="使用过程中的问题"><a href="#使用过程中的问题" class="headerlink" title="使用过程中的问题"></a>使用过程中的问题</h1><h2 id="跳转小程序按钮没有显示"><a href="#跳转小程序按钮没有显示" class="headerlink" title="跳转小程序按钮没有显示"></a>跳转小程序按钮没有显示</h2><p>没有起作用有好几个方便的原因：<br>1.微信公众号必须是服务号。要在公众号后台配置js安全域名  和 ip白名单<br>2.真机测试，才会显示（我使用微信开发者工具也不会显示的）<br>3、username&#x3D;小程序的原始id，以gh开头的，不是小程序wx开头的id<br>4、path&#x3D;‘*****.html’后面要以.html结尾（这个微信官方文档也有写）<br>5、openTagList: [“wx-open-launch-weapp”]    config配置参数必须填这个开放接口</p>
<h2 id="自定义图片按钮"><a href="#自定义图片按钮" class="headerlink" title="自定义图片按钮"></a>自定义图片按钮</h2><p>1、图片连接必须是线上的，不能是本地图片，不然不会显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div className=&quot;banner-button&quot;&gt;</span><br><span class="line">    &lt;wx-open-launch-weapp</span><br><span class="line">        id=&quot;launch-btn&quot;</span><br><span class="line">        username=&#123;this.state.miniUsername&#125;</span><br><span class="line">        path=&#123;this.state.miniPath&#125;</span><br><span class="line">        style=&#123;&#123;width: &quot;150px&quot;, height: &quot;32px&quot;, fontSize: &quot;23px&quot;&#125;&#125;&gt;</span><br><span class="line">        &lt;script type=&quot;text/wxtag-template&quot;&gt;</span><br><span class="line">            &lt;img style=&#123;&#123;width: &quot;100%&quot;&#125;&#125; src=&quot;https://images-1254198035.cos.ap-shanghai.myqcloud.com/qipai/btn.png&quot; alt=&quot;&quot;/&gt; (线上图片会显示)</span><br><span class="line">            &lt;img style=&#123;&#123;width: &quot;100%&quot;&#125;&#125; src=&quot;../image/btn.png&quot; alt=&quot;&quot;/&gt;(本地图片不会显示)</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/wx-open-launch-weapp&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="跳转小程序按钮样式不起作用"><a href="#跳转小程序按钮样式不起作用" class="headerlink" title="跳转小程序按钮样式不起作用"></a>跳转小程序按钮样式不起作用</h2><p>注意：样式无法写在外面，只能使用内联样式。固定大小的样式不支持rem单位，不会继承样式</p>
<h2 id="判断当前是否支持wx-open-launch-open按钮-手机不支持wx-open-launch-open"><a href="#判断当前是否支持wx-open-launch-open按钮-手机不支持wx-open-launch-open" class="headerlink" title="判断当前是否支持wx-open-launch-open按钮(手机不支持wx-open-launch-open)"></a>判断当前是否支持wx-open-launch-open按钮(手机不支持wx-open-launch-open)</h2><p>因为需要对不支持wx-open-launch-open按钮的做判断，显示另一个页面，所以需要判断当前手机是否支持</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// wx-open-launch-weapp按钮 微信版本要求为：7.0.12及以上。 系统版本要求为：iOS 10.3及以上、Android 5.0及以上。</span><br><span class="line">  var wechatInfo = navigator.userAgent.match(/MicroMessenger\/([\d\.]+)/i);</span><br><span class="line">  console.log(&quot;wechatInfo:&quot;, wechatInfo &amp;&amp; wechatInfo[1]);</span><br><span class="line">  // Android 5.0及以上</span><br><span class="line">  var ua = navigator.userAgent.toLowerCase();</span><br><span class="line">  console.log(ua);</span><br><span class="line">  if (!wechatInfo) &#123;</span><br><span class="line">      console.log(&quot;仅支持微信&quot;) ;</span><br><span class="line">  &#125; else if (wechatInfo[1] &lt; &quot;7.0.12&quot;) &#123;</span><br><span class="line">      console.log(&quot;微信版本要求7.0.12及以上版本&quot;)</span><br><span class="line">  &#125; else if (/android/i.test(navigator.userAgent)) &#123;</span><br><span class="line">      var test = /android\s([\w.]+)/;//IE</span><br><span class="line">      var match = test.exec(ua);</span><br><span class="line">      console.log(match);</span><br><span class="line">      document.write(&quot;This is Android &quot; + match[1] + &quot; browser.&quot;); //这是Android平台下浏览器</span><br><span class="line">      var version = match[1].split(&quot;.&quot;)[0];</span><br><span class="line">      if (version &lt; 5) &#123;</span><br><span class="line">          console.log(&#x27;Android系统要求5.0及以上版本&#x27;);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125; else if (/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)) &#123;</span><br><span class="line">      var test = /os\s([\w_]+)/;//IE</span><br><span class="line">      var match = test.exec(ua);</span><br><span class="line">      var version = match[1].split(&quot;_&quot;)[0] + &quot;.&quot; + match[1].split(&quot;_&quot;)[1];</span><br><span class="line">      console.log(version);</span><br><span class="line">      if (version &lt; 10.4) &#123;</span><br><span class="line">          console.log(&#x27;ios系统要求10.3及以上版本&#x27;);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>很多东西网上都是可以找到的， 这里面大部分内容都是我在网上可以看到的。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/react-json-view">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/react-json-view" class="post-title-link" itemprop="url">react-json-view</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-27 11:45:06" itemprop="dateCreated datePublished" datetime="2020-11-27T11:45:06+08:00">2020-11-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="react-json-view-rjv"><a href="#react-json-view-rjv" class="headerlink" title="react-json-view(rjv)"></a>react-json-view(rjv)</h2><p>最近项目上引入了一个json解析的插件，我就把这个插件应用到了原来只有技术看的代码块上，现在在去看那个代码块，感觉清晰好多~<br>很棒的一个插件，简单介绍下这个插件<br><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/react-json-view">npm地址</a></p>
<h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><p> npm install react-json-view</p>
<h2 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h2><p>“dependencies”: {<br>    “react-json-view”: “latest”<br>}</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import React from &quot;react&quot;;</span><br><span class="line">import ReactJson from &quot;react-json-view&quot;;</span><br><span class="line"></span><br><span class="line">class ReactJsonView extends React.Component&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        my_json_object: &#123;</span><br><span class="line">            &quot;string&quot;: &quot;this is a test string&quot;,</span><br><span class="line">            &quot;integer&quot;: 42,</span><br><span class="line">            &quot;array&quot;: [1,2,3,&quot;test&quot;,null],</span><br><span class="line">            &quot;float&quot;: 3.14159,</span><br><span class="line">            &quot;object&quot;: &#123;&quot;first-child&quot;: true,&quot;second-child&quot;: false,&quot;last-child&quot;: null&#125;,</span><br><span class="line">            &quot;string_number&quot;: &quot;1234&quot;,</span><br><span class="line">            &quot;date&quot;: &quot;2020-12-01T04:02:13.464Z&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">            &lt;ReactJson src=&#123;this.state.my_json_object&#125; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default ReactJsonView;</span><br></pre></td></tr></table></figure>
<p>代码运行结果：<br><img src="/react-json-view/result01.jpg"></p>
<h2 id="属性简介"><a href="#属性简介" class="headerlink" title="属性简介"></a>属性简介</h2><h3 id="src"><a href="#src" class="headerlink" title="src"></a>src</h3><pre><code>类型： json对象
默认值： 没有
描述：这里的值显示的是json数据
</code></pre>
<h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><pre><code>类型：string或这个是false
默认值： &quot;root&quot;
描述： 这里是根节点的名字，如果取值为null或者false则没有名字
</code></pre>
<h4 id="name取值对比图"><a href="#name取值对比图" class="headerlink" title="name取值对比图"></a>name取值对比图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;ReactJson</span><br><span class="line">    src=&#123;this.state.my_json_object&#125;</span><br><span class="line">    name=&#123;false&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/react-json-view/name.jpg"></p>
<h3 id="theme"><a href="#theme" class="headerlink" title="theme"></a>theme</h3><pre><code>类型：string
默认值：rjv-default
描述：rjv支持base-16主题。包括（apathy，apathy:inverted，ashes，bespin，brewer，bright:inverted，bright，chalk，codeschool，colors，eighties，embers，flat，google，grayscale，grayscale:inverted，greenscreen，harmonic，hopscotch，isotope，marrakesh，mocha，monokai，ocean，paraiso，pop，railscasts，rjv-default，shapeshifter，shapeshifter:inverted，solarized，summerfruit，summerfruit:inverted，threezerotwofour，tomorrow，tube，twilight）
</code></pre>
<h4 id="theme取值对比图"><a href="#theme取值对比图" class="headerlink" title="theme取值对比图"></a>theme取值对比图</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ReactJson</span><br><span class="line">   src=&#123;this.state.my_json_object&#125;</span><br><span class="line">   name=&#123;false&#125;</span><br><span class="line">   theme=&quot;shapeshifter&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<p><img src="/react-json-view/theme.jpg"></p>
<h3 id="style"><a href="#style" class="headerlink" title="style"></a>style</h3><pre><code>类型：object
默认值：&#123;&#125;
描述：可以通过style添加、修改样式，可覆盖主题默认提供的属性
</code></pre>
<h3 id="iconStyle"><a href="#iconStyle" class="headerlink" title="iconStyle"></a>iconStyle</h3><pre><code>类型：string
默认值：&quot;circle&quot;
描述：接受参数:circle(圆)、triangle(三角形)、square(圆)
</code></pre>
<p><img src="/react-json-view/iconStyle.jpg"></p>
<h3 id="indentWidth"><a href="#indentWidth" class="headerlink" title="indentWidth"></a>indentWidth</h3><pre><code>类型：integer
默认值：4
描述：JSON嵌套对象的缩进值
</code></pre>
<p><img src="/react-json-view/indentWidth.jpg"></p>
<h3 id="collapsed"><a href="#collapsed" class="headerlink" title="collapsed"></a>collapsed</h3><pre><code>类型：boolean 或者 integer
默认值：false
描述：当设置为true，默认情况下，所有节点都将被折叠。使用整数值在特定深度折叠。
</code></pre>
<p><img src="/react-json-view/collapsed.jpg"></p>
<h3 id="collapseStringsAfterLength"><a href="#collapseStringsAfterLength" class="headerlink" title="collapseStringsAfterLength"></a>collapseStringsAfterLength</h3><pre><code>类型：integer
默认值：false
描述：这个就是超出内容会变成…的功能。当一个整数值被赋值时，字符串就会在这个长度后面接上省略号。可以通过单击字符串值来展开和折叠字符串内容
</code></pre>
<h3 id="shouldCollapse"><a href="#shouldCollapse" class="headerlink" title="shouldCollapse"></a>shouldCollapse</h3><pre><code>类型：(field)=&gt;&#123;&#125;
默认值：false
描述：回调函数来提供对默认情况下应该折叠的对象和数组的控制。对象被传递给包含name, src, type(“数组”或“对象”)和namespace
</code></pre>
<h3 id="groupArraysAfterLength"><a href="#groupArraysAfterLength" class="headerlink" title="groupArraysAfterLength"></a>groupArraysAfterLength</h3><pre><code>类型：integet
默认值：100
描述：当指定整数值时，数组将按值的计数分组显示。组以brakset符号显示，可以通过符号展开和折叠。
</code></pre>
<p><img src="/react-json-view/groupArrayAfterLength.jpg"></p>
<h3 id="enableClipboard"><a href="#enableClipboard" class="headerlink" title="enableClipboard"></a>enableClipboard</h3><pre><code>类型：boolean 或者 (copy)=&gt;&#123;&#125;
默认值：true
描述：当prop不为false时，用户可以通过单击剪贴板图标将对象和数组复制到剪贴板。支持复制回调。
</code></pre>
<p><img src="/react-json-view/enableClipboard.jpg"></p>
<h3 id="displayObjectSize"><a href="#displayObjectSize" class="headerlink" title="displayObjectSize"></a>displayObjectSize</h3><pre><code>类型：boolean
默认值：true
描述：当设置为true时，对象和数组将显示size
</code></pre>
<p><img src="/react-json-view/displayObjectSize.jpg"></p>
<h3 id="displayDataTypes"><a href="#displayDataTypes" class="headerlink" title="displayDataTypes"></a>displayDataTypes</h3><pre><code>类型：boolean
默认值：true
描述：当设置为true，value前面显示数据类型
</code></pre>
<p><img src="/react-json-view/displayDataTypes.jpg"></p>
<h3 id="onEdit"><a href="#onEdit" class="headerlink" title="onEdit"></a>onEdit</h3><pre><code>类型：(edit)=&gt;&#123;&#125;
默认值：false
描述：当传入回调函数时，edit功能已启用。在编辑完成之后调用回调。
</code></pre>
<p><img src="/react-json-view/onEdit.jpg"></p>
<h3 id="onAdd"><a href="#onAdd" class="headerlink" title="onAdd"></a>onAdd</h3><pre><code>类型：(add)=&gt;&#123;&#125;
默认值：false
描述：当传入回调函数时，add功能已启用。在完成添加之后调用回调。
</code></pre>
<p><img src="/react-json-view/onAdd.jpg"></p>
<h3 id="defaultValue"><a href="#defaultValue" class="headerlink" title="defaultValue"></a>defaultValue</h3><pre><code>类型：string||number||boolean||array||object
默认值：null
描述：设置添加到json时的默认值
</code></pre>
<h3 id="onDelete"><a href="#onDelete" class="headerlink" title="onDelete"></a>onDelete</h3><pre><code>类型：(delete)=&gt;&#123;&#125;
默认值：false
描述：当传入回调函数时，delete功能已启用。在完成删除之后调用回调。
</code></pre>
<p><img src="/react-json-view/onDelete.jpg"></p>
<h3 id="onSelect"><a href="#onSelect" class="headerlink" title="onSelect"></a>onSelect</h3><pre><code>类型：(select)=&gt;&#123;&#125;
默认值：false
描述：当传入函数时，单击值将触发onSelect方法将被调用。
</code></pre>
<h3 id="sortKeys"><a href="#sortKeys" class="headerlink" title="sortKeys"></a>sortKeys</h3><pre><code>类型：boolean
默认值：false
描述：当设置为true，根据对象的key排序
</code></pre>
<p><img src="/react-json-view/sortKeys.jpg"></p>
<h3 id="validationMessage"><a href="#validationMessage" class="headerlink" title="validationMessage"></a>validationMessage</h3><pre><code>类型：string
默认值：“Validation Error”
描述：针对OneEdit、onAdd或onDelete回调的验证失败的自定义消息
</code></pre>
<p><a target="_blank" rel="noopener" href="https://mac-s-g.github.io/react-json-view/demo/dist/">Check out the list of supported themes in the component demo</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/ios%E6%89%8B%E6%9C%BA%E4%B8%8D%E5%85%BC%E5%AE%B9%E6%91%87%E4%B8%80%E6%91%87%E5%8A%9F%E8%83%BD">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ios%E6%89%8B%E6%9C%BA%E4%B8%8D%E5%85%BC%E5%AE%B9%E6%91%87%E4%B8%80%E6%91%87%E5%8A%9F%E8%83%BD" class="post-title-link" itemprop="url">ios手机不兼容摇一摇功能</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-12 22:22:59" itemprop="dateCreated datePublished" datetime="2020-11-12T22:22:59+08:00">2020-11-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>过年后回来的时候做了一个摇一摇的H5小游戏。因为我使用的是安卓手机，一直没有发现在苹果手机上不能使用。<br>刚开是以为是http和https的问题，但是在ios上即使使用https开头的链接然后还是不能摇~</p>
<p>后来网上找了原因说是ios13+的版本，浏览器对设备运动和方向事件的访问权限处于关闭状态，但是可以请求这种权限，类似于请求相机权限吧。</p>
<p>因此，在IOS13+的移动端中，需要在DeviceMotionEvent上调用requestPermission这个方法，该方法请求用户当前来源的权限以显示通知，然后根据用户的不同选择，触发不同的状态【granted（被授予），denied（被拒绝） 或者default（默认）】，并返回一个Promise对象。</p>
<blockquote>
<p>代码如下:</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  var ua = navigator.userAgent.toLowerCase();</span><br><span class="line"> if (ua.indexOf(&quot;like mac os x&quot;) &gt; 0) &#123;</span><br><span class="line">     var reg = /os [\d._]*/gi;</span><br><span class="line">     var verinfo = ua.match(reg);</span><br><span class="line">     var version = (verinfo + &quot;&quot;).replace(/[^0-9|_.]/ig, &quot;&quot;).replace(/_/ig, &quot;.&quot;);</span><br><span class="line">     var arr = version.split(&quot;.&quot;);</span><br><span class="line">     if (arr[0] &gt; 13) &#123;  //对13以后的版本处理,</span><br><span class="line">         DeviceMotionEvent.requestPermission().then(permissionState =&gt; &#123;</span><br><span class="line">             if (permissionState === &quot;granted&quot;) &#123;</span><br><span class="line">                 alert(&quot;你授权了，可以进行摇一摇啦&quot;);</span><br><span class="line">             &#125;</span><br><span class="line">             if (permissionState === &quot;denied&quot;) &#123;</span><br><span class="line">                 alert(&quot;你拒绝了&quot;);</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;).catch((err) =&gt; &#123;</span><br><span class="line">             //======这里可以防止重复授权，因为获取权限需要点击事件才能触发===//</span><br><span class="line">             Modal.warning(&#123;</span><br><span class="line">                 title: &#x27;获取授权&#x27;,</span><br><span class="line">                 content: &#x27;请在接下来的然窗中允许授权，否则将无法正常进行摇一摇&#x27;,</span><br><span class="line">                 onOk() &#123;</span><br><span class="line">                     reqShakePermission();</span><br><span class="line">                 &#125;,</span><br><span class="line">             &#125;);</span><br><span class="line">         &#125;);</span><br><span class="line">     &#125; else &#123;  //13以前的版本</span><br><span class="line">         alert(&quot;你的手机支持摇一摇&quot;)</span><br><span class="line">     &#125;</span><br><span class="line"> &#125; else &#123;</span><br><span class="line">     </span><br><span class="line"> &#125;</span><br><span class="line">     </span><br><span class="line">function reqShakePermission() &#123;</span><br><span class="line">    if (typeof DeviceMotionEvent.requestPermission === &quot;function&quot;) &#123;</span><br><span class="line">        DeviceMotionEvent.requestPermission().then((permissionState) =&gt; &#123;</span><br><span class="line">            if (permissionState === &quot;granted&quot;) &#123;</span><br><span class="line">                var speed = 15;    // 用来判定的加速度阈值，太大了则很难触发</span><br><span class="line">                var x, y, z, lastX, lastY, lastZ;</span><br><span class="line">                x = y = z = lastX = lastY = lastZ = 0;</span><br><span class="line">                window.addEventListener(&quot;devicemotion&quot;, function (event) &#123;</span><br><span class="line">                    var acceleration = event.accelerationIncludingGravity;</span><br><span class="line">                    x = acceleration.x;</span><br><span class="line">                    y = acceleration.y;</span><br><span class="line">                    if (self.state.clickStatus) &#123;</span><br><span class="line">                        if (Math.abs(x - lastX) &gt; speed || Math.abs(y - lastY) &gt; speed) &#123;</span><br><span class="line">                            // 用户设备摇动了，触发响应操作</span><br><span class="line">                            // 此处的判断依据是用户设备的加速度大于我们设置的阈值</span><br><span class="line">                                alert(&quot;摇动了手机&quot;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; else &#123;//如果已经生成了结果就不需要再重新生成了</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                    lastX = x;</span><br><span class="line">                    lastY = y;</span><br><span class="line">                &#125;, false);</span><br><span class="line">            &#125; else if (permissionState == &quot;denied&quot;) &#123;</span><br><span class="line">                alert(&quot;拒绝喽&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).catch((error) =&gt; &#123;</span><br><span class="line">            // console.log(error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        // 处理常规的非iOS 13+设备</span><br><span class="line">        // console.log(&quot;处理常规的非iOS 13+设备&quot;);</span><br><span class="line">        if (window.DeviceMotionEvent) &#123;</span><br><span class="line">            alert(&quot;可以进行摇一摇&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // console.log(&#x27;不支持window.DeviceMotionEvent&#x27;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>效果图：<br><img src="/ios%E6%89%8B%E6%9C%BA%E4%B8%8D%E5%85%BC%E5%AE%B9%E6%91%87%E4%B8%80%E6%91%87%E5%8A%9F%E8%83%BD/allow.jpg"></p>
</blockquote>
<p>PS：点击允许即可使用摇一摇功能。如果拒绝，需要在关掉这个进程再次进入页面才会再次询问。否则一直用不了摇一摇功能哦~</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/inline-block%E9%97%B4%E9%9A%99">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/inline-block%E9%97%B4%E9%9A%99" class="post-title-link" itemprop="url">inline-block间隙</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-09 19:12:04" itemprop="dateCreated datePublished" datetime="2020-07-09T19:12:04+08:00">2020-07-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>我针对一些元素使用inline-block要比float频繁。img标签本身就是inline-block属性，所以页面中使用到img标签的时候经常会出现间隙问题。<br>最近写的h5页面多了，遇到这个问题的次数就越来越多了。<br>最典型的就是图片，当我两个图片要连接时，中间就出现了缝隙。审查元素我并没有设置间距。然后就找问题的原因，发现是典型的换行符&#x2F;空格间隙问题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;!doctype html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta charset=&quot;utf-8&quot;&gt;</span><br><span class="line">&lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;!--适应移动端--&gt;</span><br><span class="line">&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br><span class="line">&lt;!--css样式--&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">*&#123;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line">ul&#123;</span><br><span class="line">    list-style: none;</span><br><span class="line">&#125;</span><br><span class="line">li&#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    width: 100px;</span><br><span class="line">    height: 100px;</span><br><span class="line">    background: #108ee9;</span><br><span class="line">    color: #ffffff;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">    &lt;li&gt;llll&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;ffff&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;zzzz&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;7777&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;1111&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;9999&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><img src="/inline-block%E9%97%B4%E9%9A%99/01.jpg"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://charli-719.github.io/es6%E4%B8%AD%E7%9A%84%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charli">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charli">
      <meta itemprop="description" content="不积跬步，无以至千里">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | Charli">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/es6%E4%B8%AD%E7%9A%84%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6" class="post-title-link" itemprop="url">es6中的扩展运算符</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-06 19:00:00" itemprop="dateCreated datePublished" datetime="2020-07-06T19:00:00+08:00">2020-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-05-24 18:35:59" itemprop="dateModified" datetime="2022-05-24T18:35:59+08:00">2022-05-24</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="对象中的扩展运算符-…-用于取出参数对象中的所有可遍历属性，拷贝到当前对象之中"><a href="#对象中的扩展运算符-…-用于取出参数对象中的所有可遍历属性，拷贝到当前对象之中" class="headerlink" title="对象中的扩展运算符(…)用于取出参数对象中的所有可遍历属性，拷贝到当前对象之中"></a>对象中的扩展运算符(…)用于取出参数对象中的所有可遍历属性，拷贝到当前对象之中</h3><p>1.使用方法一：在函数的传参数过程。作用将剩余的参数放入一个数组中。合并<br>rest参数形式为（…变量名），其值为一个数组，用于获取函数多余参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function f(a,...arr)&#123;</span><br><span class="line">    console.log(arr);</span><br><span class="line">&#125;</span><br><span class="line">f(1,2,3,4,4); //[2,3,4,5]复制代码</span><br><span class="line">rest参数只能放在最后一个，否则报错：</span><br><span class="line">function f(a, ...b, c)&#123;...&#125;; // 报错 </span><br></pre></td></tr></table></figure>
<p><img src="/es6%E4%B8%AD%E7%9A%84%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6/error.jpg"></p>
<p>2.使用方法二：数组中的拓展运算  拆解<br>拓展运算符使用(…)，类似rest参数的逆运算，将数组转为用(,)分隔的参数序列。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> console.log(...[1, 2, 3]);   // 1 2 3 </span><br><span class="line">console.log(1, ...[2,3], 4); // 1 2 3 4</span><br></pre></td></tr></table></figure>

<p>拓展运算符主要使用在函数调用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function f (a, b)&#123;</span><br><span class="line">       console.log(a, b);</span><br><span class="line">   &#125;</span><br><span class="line">   f(...[1, 2]); // 1 2</span><br><span class="line">    </span><br><span class="line">   function g (a, b, c, d, e)&#123;</span><br><span class="line">       console.log(a, b, c, d, e);</span><br><span class="line">   &#125;</span><br><span class="line">   g(0, ...[1, 2], 3, ...[4]); // 0 1 2 3 4复制代码</span><br></pre></td></tr></table></figure>

<p>若拓展运算符后面是个空数组，则不产生效果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...[], 1]; // [1]</span><br></pre></td></tr></table></figure>

<p>替代apply方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// ES6之前</span><br><span class="line">function f(a, b, c)&#123;...&#125;;</span><br><span class="line">var a = [1, 2, 3];</span><br><span class="line">f.apply(null, a);</span><br><span class="line"> </span><br><span class="line">// ES6之后</span><br><span class="line">function f(a, b, c)&#123;...&#125;;</span><br><span class="line">let a = [1, 2, 3];</span><br><span class="line">f(...a);</span><br><span class="line"> </span><br><span class="line">// ES6之前</span><br><span class="line">Math.max.apply(null, [3,2,6]);</span><br><span class="line"> </span><br><span class="line">// ES6之后</span><br><span class="line">Math.max(...[3,2,6]);</span><br></pre></td></tr></table></figure>

<p>拓展运算符的运用<br>(1)复制数组：<br>通常我们直接复制数组时，只是浅拷贝，如果要实现深拷贝，可以使用拓展运算符。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 通常情况 浅拷贝</span><br><span class="line">let a1 = [1, 2];</span><br><span class="line">let a2 = a1; </span><br><span class="line">a2[0] = 3;</span><br><span class="line">console.log(a1,a2); // [3,2] [3,2]</span><br><span class="line"> </span><br><span class="line">// 拓展运算符 深拷贝</span><br><span class="line">let a1 = [1, 2];</span><br><span class="line">let a2 = [...a1];</span><br><span class="line">// let [...a2] = a1; // 作用相同</span><br><span class="line">a2[0] = 3;</span><br><span class="line">console.log(a1,a2); // [1,2] [3,2]</span><br></pre></td></tr></table></figure>

<p>(2)合并数组：  注意，这里合并数组，只是浅拷贝。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let a1 = [1,2];</span><br><span class="line">let a2 = [3];</span><br><span class="line">let a3 = [4,5];</span><br><span class="line"> </span><br><span class="line">// ES5 </span><br><span class="line">let a4 = a1.concat(a2, a3);</span><br><span class="line"> </span><br><span class="line">// ES6</span><br><span class="line">let a5 = [...a1, ...a2, ...a3];</span><br><span class="line"> </span><br><span class="line">a4[0] === a1[0]; // true</span><br><span class="line">a5[0] === a1[0]; // true</span><br></pre></td></tr></table></figure>

<p>(3)与解构赋值结合：<br>与解构赋值结合生成数组，但是使用拓展运算符需要放到参数最后一个，否则报错。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">let [a, ...b] = [1, 2, 3, 4]; </span><br><span class="line">// a =&gt; 1  b =&gt; [2,3,4]</span><br><span class="line"> </span><br><span class="line">let [a, ...b] = [];</span><br><span class="line">// a =&gt; undefined b =&gt; []</span><br><span class="line"> </span><br><span class="line">let [a, ...b] = [&quot;abc&quot;];</span><br><span class="line">// a =&gt; &quot;abc&quot;  b =&gt; []</span><br></pre></td></tr></table></figure>

<p>扩展运算符可以将字符串转为真正的数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[...&#x27;hello&#x27;]   // [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span><br></pre></td></tr></table></figure>

<p>将数据结构转为数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// arguments对象</span><br><span class="line">function foo() &#123;</span><br><span class="line">  const args = [...arguments];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>用于替换es5中的Array.prototype.slice.call(arguments)写法</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Charli</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
